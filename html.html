<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div
      id="new"
      style="
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 1600px;
      "
    ></div>
  </body>
  <script>
     window.onmessage=(event)=>{
       console.log("log event in iframe...............",event)

  window.postMessage(
          {
           message:'sent data from on message'
          },"https://jenksryan-editorx-io.filesusr.com"
      
  )

    }
    let main = [
      [
        "Activity",
        [
          ["RockClimbing", ["trad Climbing", "Big Walling", "Sport Climbing"]],
          ["Canyoing", ["Wet Canyons", "Dry Canyons"]],
          ["hiliting"],
          ["RopeJumping"],
          ["Caving"],
        ],
      ],
      [
        "Activity",
        [
          ["RockClimbing", ["trad Climbing", "Big Walling", "Sport Climbing"]],
          ["Canyoing", ["Wet Canyons", "Dry Canyons"]],
          ["hiliting"],
          ["RopeJumping"],
          ["Caving"],
        ],
      ],
      [
        "Activity",
        [
          ["RockClimbing", ["trad Climbing", "Big Walling", "Sport Climbing"]],
          ["Canyoing", ["Wet Canyons", "Dry Canyons"]],
          ["hiliting"],
          ["RopeJumping"],
          ["Caving"],
        ],
      ],
    ];


    let tags = document.getElementById("new");

    // console.log("log array.....................", arr.length);

    let resultDisplayArray = [];
    for (let x = 0; x < main.length; x++) {
      let mainDiv = document.createElement("div");
      mainDiv.style.width = "400px";
      let heading = document.createElement("H3");
      heading.style.padding="10px"
      heading.style.borderBottom="2px solid #BADA55"
      mainDiv.append(heading);
      heading.innerText = main[x][0];
      console.log("heading...........", heading);
      let arr = main[x][1];
      // console.log("check for value of x.....................",main[x][1]);
      for (let i = 0; i < arr.length; i++) {
        //.............................first loop......................
        // console.log(arr[i].length);
        console.log("check i...........", arr[i]);

        //...............................second loop...........................

        for (let z = 0; z < arr[i].length; z++) {
          let childDiv = document.createElement("div");
          let fstChild = document.createElement("div");
          if (arr[i][z] == undefined) {
          } else {
            if (!Array.isArray(arr[i][z])) {
              console.log("i z...........", arr[i][z]);
              fstChild.innerHTML += ` 
        <input  onchange="getValues(this)" class="main" type="checkbox" style="margin-bottom:10px" placeholder="${
          arr[i][z]
        }" id="${arr[i][z].replace(/ /g, "")}" name="${arr[i][z]}" value="${
                arr[i][z]
              }"> 
              
        <label for="${arr[i][z].replace(/ /g, "")}">${arr[i][z]}</label>
        <br>`;
              mainDiv.append(fstChild);
            }
          }
          if (Array.isArray(arr[i][z])) {
            //................................third loop..................................//

            for (let a = 0; a < arr[i][z].length; a++) {
              console.log("a i z log ...............", arr[i][z][a]);
              childDiv.innerHTML += `
        <input onchange="getValues(this)" type="checkbox" style=" margin-left: 15px;" placeholder="${
          arr[i][z][a]
        }" id="${arr[i][z][a].replace(/ /g, "")}" name="${i,"",z,"",a}" value="${
                arr[i][z][a]
              }"> 
        <label for="${arr[i][z][a].replace(/ /g, "")}">${arr[i][z][a]}</label>
        <br>`;

              mainDiv.append(childDiv);
            }
          }
          tags.append(mainDiv);
        }
      }
    }

    let getValues = (res) => {
      //............... functionality when checked ,..............................//

      //............................add checked item into filter array call filter function every onChange event................................//
      window.parent.postMessage(
          {
            data:{
            "status":res.checked,
            "value":res.value
            }
          },"https://jenksryan-editorx-io.filesusr.com"
      
      )
      console.log("get item", res);
      console.log("item value", res.checked);
      console.log("item data.......", res.value);
      console.log("indxes of element", res.name);

      // console.log("if checked add",value);
      //................................functionality for remove when unchecked................................

      //using array.indexOf to get index of item which is unchecked and splice /remove it from data
    };
   

  
  </script>
</html>
